<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Wiki</title>
	<!-- https://github.com/sindresorhus/github-markdown-css -->
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css"
		integrity="sha512-Oy18vBnbSJkXTndr2n6lDMO5NN31UljR8e/ICzVPrGpSud4Gkckb8yUpqhKuUNoE+o9gAb4O/rAxxw1ojyUVzg=="
		crossorigin="anonymous" />
	<!-- https://icons8.com/icon/set/favicon/material-outlined -->
	<link rel="icon"
		type="image/png"
		href="https://img.icons8.com/material-outlined/24/000000/google-web-search.png"/>
	<!-- https://github.com/markdown-it/markdown-it -->
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/11.0.0/markdown-it.js"
		integrity="sha512-NAy36MOh5jQWVH+nhBtvf1oHXp61td4tTZhe/SxbhNAV4RjeKlvUJ/WlzOwDxLQfUIsDPWMKFTsrRl6W4RnQuw=="
		crossorigin="anonymous"></script>
	<!-- https://github.com/sandcastle/wikid
		https://remysharp.com/demo/wiki2html.html -->
	<script
		src="https://remysharp.com/downloads/wiki2html.js"
		></script>

</head>
<body>
	<script>
// ----

var base_url = (function(){
		var arr_path = document.location.pathname.split('/');
		arr_path.pop();
		return arr_path.join('/') + '/'
	})(),
	
	local_dir = '',
	get_base = function(filename){
		var path = filename.split('/');
		path.pop();
		return path.length
			? path.join('/') + '/'
			: ''
	},
	
	normalizeLink = function(url){
		return (url.slice(-3) == '.md' || url.slice(-10) == '.mediawiki')
			? '#' + url.replace('./', local_dir)		// anchor
			: (url.substr(0,4) == 'http:'
				|| url.substr(0,5) == 'https:')
				? URL									// external URL
				: url.replace('./', local_dir)			// local URL
	};


	render_text = function(marked_text, filename){
		if(filename){
			local_dir = get_base(filename);
			
			if(filename.slice(-3) == '.md'){
				var md = window.markdownit();
				md.normalizeLink = function(url){
					return normalizeLink(url);
				};
				document.getElementById('mdtext').innerHTML = md.render(marked_text);
			}
			else if(filename.slice(-10) == '.mediawiki'){
				document.getElementById('mdtext').innerHTML = marked_text.wiki2html();
			}
			document.title = 'Wiki: ' + decodeURIComponent(filename);
		}
	},

	load_and_render = function(){
		filename = document.location.hash.substring(1) || 'README.md';	// skip hash-char
		var url = base_url + filename;
		var oReq = new XMLHttpRequest();
		oReq.addEventListener('load', render_text);
		oReq.open('GET', url);
		oReq.onload = function(e){
			this.status != 200 || render_text(this.response, filename);
		};
		oReq.send();
	};

window.onload = function(){
	load_and_render();
};

window.onhashchange = function(){
	load_and_render();
};

// ----
	</script>
	<article id="mdtext" class="markdown-body"></article>

<!--
	Banner "Fork me on GitHub"
	generated by: https://codepo8.github.io/css-fork-on-github-ribbon
-->
<style>#forkongithub a{background:#000;color:#fff;text-decoration:none;font-family:arial,sans-serif;text-align:center;font-weight:bold;padding:5px 40px;font-size:1rem;line-height:2rem;position:relative;transition:0.5s;}#forkongithub a:hover{background:#c11;color:#fff;}#forkongithub a::before,#forkongithub a::after{content:"";width:100%;display:block;position:absolute;top:1px;left:0;height:1px;background:#fff;}#forkongithub a::after{bottom:1px;top:auto;}@media screen and (min-width:800px){#forkongithub{position:absolute;display:block;top:0;right:0;width:200px;overflow:hidden;height:200px;z-index:9999;}#forkongithub a{width:200px;position:absolute;top:60px;right:-60px;transform:rotate(45deg);-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);-moz-transform:rotate(45deg);-o-transform:rotate(45deg);box-shadow:4px 4px 10px rgba(0,0,0,0.8);}}</style><span id="forkongithub"><a href="https://github.com/alex-salnikov/markdownit">Fork me on GitHub</a></span>

</body>
</html>